# 变更提案：日志中心与前端埋点日志增强

## 需求背景
当前日志中心仅覆盖审计日志，缺少前端埋点、前端运行日志与错误日志的统一展示与留存策略；同时前端表格缺乏统一封装、分页文案不一致，影响使用体验与后续扩展。

## 变更内容
1. 新增日志中心下的「打点日志」「前端日志」「错误日志」视图与数据模型。
2. 前端埋点与日志统一批量上报（仅主页面 PV），支持页面 code 与 traceId/sessionId。
3. 接口统一返回 traceId，支持按 traceId 串联会话全链路。
3. 统一前端表格组件，支持分页文案统一为“页”。
4. 日志留存策略：打点/前端/错误日志仅保留 7 天，每日定时清理。

## 影响范围
- **Modules:** audit-center、frontend、log-center(新增)、seed、common
- **Files:** 前端页面/路由/公共组件、后端日志模块/实体/定时任务
- **APIs:** 新增日志上报与查询接口
- **Data:** 新增打点日志表、前端日志表、错误日志表

## 核心场景

### Requirement: 日志中心新增多日志类型
**Module:** audit-center / log-center
在日志中心中新增打点日志、前端日志与错误日志查询与详情展示，支持按 traceId 聚合链路。

#### Scenario: 日志中心筛选与分页
根据日志类型、用户、模块、时间区间筛选
- 列表分页展示
- 详情弹窗展示原始内容

### Requirement: 前端埋点上报 PV
**Module:** frontend / log-center
登录后路由变化触发 PV 上报，仅主页面生效，携带页面 code。

#### Scenario: 页面 PV 记录
用户从菜单进入页面时
- 前端将页面 PV 与前端日志/错误日志统一写入本地队列
- 按时间窗/数量阈值批量上报，后端按类型入表
- 接口返回 traceId，日志中心可按 traceId 查询会话链路

### Requirement: 公共表格组件
**Module:** frontend
统一全站表格分页与样式规范。

#### Scenario: 统一分页文案
分页单位为“页”，可选 10/20/30/50
- 所有表格使用公共组件

### Requirement: 7 天数据保留
**Module:** log-center
打点/前端/错误日志仅保留 7 天。

#### Scenario: 定时清理
每日定时清理过期日志
- 数据量可控
- 查询默认限制 7 天内

## 风险评估
- **风险:** 日志量增长导致查询变慢
  - **Mitigation:** 按类型分表 + 7 天留存 + 查询索引与分页
- **风险:** 前端埋点过于频繁
  - **Mitigation:** 仅主页面触发 + 后端限流/批量接口预留
